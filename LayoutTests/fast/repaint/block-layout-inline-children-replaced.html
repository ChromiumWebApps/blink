<head>
<title>This is a test for regression against https://bugs.webkit.org/show_bug.cgi?id=40142</title>
<style>
.target {
    width: 400px;
    height: 150px;
    text-align: center;
    border: 1px solid #ddd;
}
</style>
</head>

<body style="margin: 0;" onload="runRepaintTest()">
    <script src="resources/text-based-repaint.js"></script>
    <script>
        window.testIsAsync = true;

        function repaintTest()
        {
            var target = document.getElementById("target");
            target.innerHTML +=
                '<img style="height: 100px;" src="resources/apple.jpg" >';
            target.firstChild.addEventListener("load", finishRepaintTest, false);
        }
    </script>


    <p>This is a test for regression against <a href="https://bugs.webkit.org/show_bug.cgi?id=40142">https://bugs.webkit.org/show_bug.cgi?id=40142</a></p>

    <div>
        <div class="target" id="target"></div>
    </div>
</body>
